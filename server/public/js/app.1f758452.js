(function(t){function e(e){for(var a,s,i=e[0],u=e[1],c=e[2],p=0,d=[];p<i.length;p++)s=i[p],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);l&&l(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],a=!0,i=1;i<r.length;i++){var u=r[i];0!==n[u]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=r[0]))}return t}var a={},n={app:0},o=[];function s(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=a,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(r,a,function(e){return t[e]}.bind(null,a));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var l=u;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var a=r("85ec"),n=r.n(a);n.a},4175:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("navbar"),r("main",{staticClass:"py-4"},[r("router-view")],1)],1)},o=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("nav",{staticClass:"Navbar"},[t.user.loggedIn?[r("div",{staticClass:"nav-item"},[t._v(t._s(t.user.data.displayName))]),t._v(" "),r("li",{staticClass:"nav-item"},[r("a",{staticClass:"nav-link",on:{click:function(e){return e.preventDefault(),t.signOut(e)}}},[t._v("Logga ut "),r("i",{staticClass:" fa fa-sign-in"})])])]:[r("div",{staticClass:"navContainer"},[r("h2",[t._v("Välkommen till Trädgårdsbloggen")]),r("li",{staticClass:"nav-i"},[r("router-link",{staticClass:"nav-link",attrs:{to:"login"}},[t._v("Logga in "),r("i",{staticClass:" fa fa-sign-in"})])],1),r("li",{staticClass:"nav-i"},[r("router-link",{staticClass:"nav-link",attrs:{to:"register"}},[t._v("Registera konto "),r("i",{staticClass:" fa fa-sign-in"})])],1)])]],2)},i=[],u=(r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("ac1f"),r("5319"),r("159b"),r("ade3")),c=r("2f62"),l=r("8aa5"),p=r.n(l);function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){Object(u["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var f={computed:m({},Object(c["b"])({user:"user"})),methods:{signOut:function(){var t=this;p.a.auth().signOut().then((function(){t.$router.replace({name:"home"})}))}}},v=f,h=(r("c555"),r("2877")),b=Object(h["a"])(v,s,i,!1,null,"72d5456a",null),g=b.exports,w={name:"app",components:{Navbar:g}},y=w,O=(r("034f"),Object(h["a"])(y,n,o,!1,null,null,null)),_=O.exports,x=(r("45fc"),r("8c4f")),P=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"containerForm"},[r("h2",[t._v("Login")]),t.error?r("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.error))]):t._e(),r("form",{staticClass:"form",attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[r("label",{attrs:{for:"email"}},[t._v("E-postadress")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",attrs:{id:"email",type:"email",name:"email",value:"",required:"",autofocus:""},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),r("label",{attrs:{for:"password"}},[t._v("Lösenord")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control",attrs:{id:"password",type:"password",name:"password",required:""},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),r("button",{staticClass:"btnLog",attrs:{type:"submit"}},[t._v("Logga in")])])])},j=[],C={data:function(){return{form:{email:"",password:""},error:null}},methods:{submit:function(){var t=this;p.a.auth().signInWithEmailAndPassword(this.form.email,this.form.password),p.a.auth().onAuthStateChanged((function(e){e&&t.$router.replace({name:"Dashboard"})}))}}},A=C,k=Object(h["a"])(A,P,j,!1,null,null,null),E=k.exports,D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"containerForm"},[r("h2",[t._v("Registera konto")]),t.error?r("div",{staticClass:"alert alert-danger"},[t._v(t._s(t.error))]):t._e(),r("form",{staticClass:"form",attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[r("label",{attrs:{for:"name"}},[t._v("Namn")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{id:"name",type:"name",name:"name",value:"",required:"",autofocus:""},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),r("label",{attrs:{for:"email"}},[t._v("E-postadress")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",attrs:{id:"email",type:"email",name:"email",value:"",required:"",autofocus:""},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),r("label",{attrs:{for:"password"}},[t._v("Lösenord")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control",attrs:{id:"password",type:"password",name:"password",required:""},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),r("button",{staticClass:"btnLog",attrs:{type:"submit"}},[t._v("Registrera konto")])])])},S=[],I=(r("b0c0"),{data:function(){return{form:{name:"",email:"",password:""},error:null}},methods:{submit:function(){var t=this;p.a.auth().createUserWithEmailAndPassword(this.form.email,this.form.password).then((function(e){e.user.updateProfile({displayName:t.form.name}).then((function(){t.$router.replace({name:"Dashboard"})}))})).catch((function(e){t.error=e.message}))}}}),R=I,T=Object(h["a"])(R,D,S,!1,null,null,null),U=T.exports,B=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"card-body"},[t.user?r("div",{staticClass:"alertSuccess",attrs:{role:"alert"}},[t._v("Du är inloggad!")]):t._e()]),r("PostComponent")],1)},L=[],N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("img",{staticClass:"logo",attrs:{src:r("6b79"),alt:"logo"}}),a("hr"),a("div",{staticClass:"create-post"},[a("form",{attrs:{id:"myForm"}},[a("label",{attrs:{for:"create-post"}},[t._v("Titel:")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{type:"text",id:"create-post",placeholder:""},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),a("br"),a("label",{attrs:{for:"create-post"}},[t._v("Författare:")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.textAuthor,expression:"textAuthor"}],attrs:{type:"text",id:"author",placeholder:""},domProps:{value:t.textAuthor},on:{input:function(e){e.target.composing||(t.textAuthor=e.target.value)}}}),a("br"),a("label",{attrs:{for:"create-post"}},[t._v("Inlägg:")]),a("br"),a("vue-editor",{attrs:{name:"text",id:"textArea"},model:{value:t.textArea,callback:function(e){t.textArea=e},expression:"textArea"}})],1),a("div",[a("p",[t._v("Ladda upp bild:")]),a("input",{attrs:{type:"file",accept:"image/*"},on:{change:t.previewImage}})]),a("div",[a("p",[t._v("Laddar upp... "+t._s(t.uploadValue.toFixed()+"%")+" "),a("progress",{attrs:{id:"progress",max:"100"},domProps:{value:t.uploadValue}})])]),null!=t.imageData?a("div",[a("img",{staticClass:"preview",attrs:{src:t.picture}}),a("br"),a("button",{staticClass:"buttonUp",on:{click:t.onUpload}},[t._v("Ladda upp bild")])]):t._e(),a("button",{staticClass:"buttonUp",on:{click:t.createPost}},[t._v("Posta inlägg")]),a("button",{staticClass:"buttonUp",attrs:{id:"EditButton"},on:{click:function(e){return t.updatePost(t.editId,t.text,t.textAuthor,t.textArea)}}},[t._v("Updatera post")])]),t.error?a("p",{staticClass:"error"},[t._v(t._s(t.error))]):t._e(),a("div",{staticClass:"post-container"},t._l(t.posts.slice().reverse(),(function(e,r){return a("div",{key:e._id,staticClass:"post",attrs:{item:e,index:r}},[a("p",{staticClass:"title"},[t._v(t._s(e.text))]),a("div",{attrs:{id:"imgContainer"}},[a("img",{attrs:{src:e.pic}})]),a("p",{staticClass:"text",domProps:{innerHTML:t._s(e.tArea)}}),a("p",{staticClass:"author"},[t._v("Författare: "+t._s(e.author))]),a("p",{staticClass:"time"},[t._v(t._s(e.createdAt.getFullYear()+"-"+(e.createdAt.getMonth()+1)+"-"+e.createdAt.getDate()))]),a("a",{attrs:{href:"#"}},[a("button",{attrs:{id:"buttonDown1"},on:{click:function(r){return t.updateThis(e._id,e.pic,e.text,e.author,e.tArea)}}},[t._v("Updatera post")])]),a("button",{attrs:{id:"buttonDown2"},on:{click:function(r){return t.deletePost(e._id)}}},[t._v("Radera")])])})),0)])},$=[],q=(r("96cf"),r("1da1")),G=(r("d81d"),r("d3b7"),r("d4ec")),F=r("bee2"),V=r("bc3a"),M=r.n(V);function J(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function W(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?J(Object(r),!0).forEach((function(e){Object(u["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var X="api/posts/",z=function(){function t(){Object(G["a"])(this,t)}return Object(F["a"])(t,null,[{key:"getPosts",value:function(){return new Promise(function(){var t=Object(q["a"])(regeneratorRuntime.mark((function t(e,r){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.a.get(X);case 3:a=t.sent,n=a.data,e(n.map((function(t){return W({},t,{createdAt:new Date(t.createdAt)})}))),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),r(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,r){return t.apply(this,arguments)}}())}},{key:"insertPost",value:function(t,e,r,a){return M.a.post(X,{text:t,author:e,pic:r,tArea:a})}},{key:"deletePost",value:function(t){return M.a.delete("".concat(X).concat(t))}},{key:"updatePost",value:function(t,e,r,a,n){return M.a.put("".concat(X).concat(t),{text:e,author:r,pic:a,tArea:n})}}]),t}(),K=z,H=r("5873"),Q={name:"PostComponent",components:{VueEditor:H["a"]},data:function(){return{posts:[],error:"",text:"",textAuthor:"",textArea:"",imageData:null,picture:null,uploadValue:0,EditBool:!1,editId:""}},created:function(){var t=Object(q["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,K.getPosts();case 3:this.posts=t.sent,this.showEditButton(),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),this.error=t.t0.message;case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),methods:{createPost:function(){var t=Object(q["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,K.insertPost(this.text,this.textAuthor,this.picture,this.textArea);case 2:return t.next=4,K.getPosts();case 4:this.posts=t.sent,setTimeout((function(){window.location.reload()}),3);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deletePost:function(){var t=Object(q["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!confirm("Är du säker på att du vill radera inlägget?")){t.next=6;break}return t.next=3,K.deletePost(e);case 3:return t.next=5,K.getPosts();case 5:this.posts=t.sent;case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),updatePost:function(){var t=Object(q["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.editId=e,t.next=3,K.updatePost(this.editId,this.text,this.textAuthor,this.picture,this.textArea);case 3:return t.next=5,K.getPosts();case 5:this.posts=t.sent,setTimeout((function(){window.location.reload()}),3);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),showEditButton:function(){this.EditBool?document.getElementById("EditButton").style.display="inline-block":document.getElementById("EditButton").style.display="none"},updateThis:function(t,e,r,a,n){this.text=r,this.textAuthor=a,this.textArea=n,this.editId=t,this.picture=e,this.imageData=!0,this.EditBool=!this.EditBool,this.showEditButton()},previewImage:function(t){this.uploadValue=0,this.picture=null,this.imageData=t.target.files[0]},onUpload:function(){var t=this;this.picture=null;var e=p.a.storage().ref("".concat(this.imageData.name)).put(this.imageData);e.on("state_changed",(function(e){t.uploadValue=e.bytesTransferred/e.totalBytes*100}),(function(t){console.log(t.message)}),(function(){t.uploadValue=100,e.snapshot.ref.getDownloadURL().then((function(e){t.picture=e}))}))}}},Y=Q,Z=(r("cb98"),Object(h["a"])(Y,N,$,!1,null,"87888b8c",null)),tt=Z.exports;function et(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function rt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?et(Object(r),!0).forEach((function(e){Object(u["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var at={components:{PostComponent:tt},computed:rt({},Object(c["b"])({user:"user"}))},nt=at,ot=Object(h["a"])(nt,B,L,!1,null,null,null),st=ot.exports;a["a"].use(x["a"]);var it=new x["a"]({mode:"history",base:"/",routes:[{path:"/login",name:"login",component:E,meta:{requiresGuest:!0}},{path:"/register",name:"Register",component:U},{path:"/dashboard",name:"Dashboard",component:st,meta:{requiresAuth:!0}}]});it.beforeEach((function(t,e,r){t.matched.some((function(t){return t.meta.requiresAuth}))?p.a.auth().currentUser?r():r({path:"/login",query:{redirect:t.fullPath}}):t.matched.some((function(t){return t.meta.requiresGuset}))?p.a.auth().currentUser?r():r({path:"/dashboard",query:{redirect:t.fullPath}}):r()}));var ut=it;a["a"].use(c["a"]);var ct,lt=new c["a"].Store({state:{user:{loggedIn:!1,data:null}},getters:{user:function(t){return t.user}},mutations:{SET_LOGGED_IN:function(t,e){t.user.loggedIn=e},SET_USER:function(t,e){t.user.data=e}},actions:{fetchUser:function(t,e){var r=t.commit;r("SET_LOGGED_IN",null!==e),r("SET_USER",e?{displayName:e.displayName,email:e.email}:null)}}});a["a"].config.productionTip=!1,l["initializeApp"]({apiKey:"AIzaSyCO_tH8m2oXafTnPRtXK9CX2J5W3891SqA",authDomain:"vue-upload-9e74e.firebaseapp.com",databaseURL:"https://vue-upload-9e74e.firebaseio.com",projectId:"vue-upload-9e74e",storageBucket:"vue-upload-9e74e.appspot.com",messagingSenderId:"101384535440",appId:"1:101384535440:web:8ba757261171c4a2c1c715",measurementId:"G-B1PT1QW2GQ"}),l["initializeApp"]({apiKey:"AIzaSyAG936OTkXRFrEcJtJKEG7XcHiq20WB7uc",authDomain:"loginvue-af2d9.firebaseapp.com",databaseURL:"https://loginvue-af2d9.firebaseio.com",projectId:"loginvue-af2d9",storageBucket:"loginvue-af2d9.appspot.com",messagingSenderId:"56475866926",appId:"1:56475866926:web:69015e72aeb4e1d2168cbf"},"login"),l["auth"]().onAuthStateChanged((function(t){lt.dispatch("fetchUser",t)})),l["auth"]().onAuthStateChanged((function(t){lt.dispatch("fetchUser",t),ct||(ct=new a["a"]({el:"#app",router:ut,store:lt,template:"App/>",components:{App:_},render:function(t){return t(_)}}).$mount("#app"))}))},"6b79":function(t,e,r){t.exports=r.p+"img/logo.b0bd8a6e.png"},"85ec":function(t,e,r){},"8b30":function(t,e,r){},c555:function(t,e,r){"use strict";var a=r("8b30"),n=r.n(a);n.a},cb98:function(t,e,r){"use strict";var a=r("4175"),n=r.n(a);n.a}});
//# sourceMappingURL=app.1f758452.js.map